package net.minecraft.client;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.PrintWriter;
import org.lwjgl.input.Keyboard;

public final class GameSettings {
    private static final String[] RENDER_DISTANCES = new String[]{ "Far", "Normal", "Short", "Tiny" };
    private static final String[] DIFFICULTIES = new String[]{ "Peaceful", "Easy", "Normal", "Hard" };

    private Minecraft mc;
    private EnhancedMinecraft enhancedMc;
    private File optionsFile;

    public int numberOfOptions = 10; // Updated number of options
    public int difficulty = 2;
    public boolean thirdPersonView = false;
    public boolean music = true;
    public boolean sound = true;
    public boolean invertMouse = false;
    public boolean showFPS = false;
    public int renderDistance = 0;
    public boolean fancyGraphics = true;
    public boolean anaglyph = false;
    public boolean limitFramerate = false;
    public boolean showExitConfirmation = true; // New setting for confirmation screen

    public KeyBinding keyBindForward = new KeyBinding("Forward", 17);
    public KeyBinding keyBindLeft = new KeyBinding("Left", 30);
    public KeyBinding keyBindBack = new KeyBinding("Back", 31);
    public KeyBinding keyBindRight = new KeyBinding("Right", 32);
    public KeyBinding keyBindJump = new KeyBinding("Jump", 57);
    public KeyBinding keyBindInventory = new KeyBinding("Inventory", 18);
    public KeyBinding keyBindDrop = new KeyBinding("Drop", 16);
    public KeyBinding keyBindChat = new KeyBinding("Chat", 20);
    public KeyBinding keyBindToggleFog = new KeyBinding("Toggle fog", 33);
    public KeyBinding keyBindSave = new KeyBinding("Save location", 28);
    public KeyBinding keyBindLoad = new KeyBinding("Load location", 19);

    public KeyBinding[] keyBindings = new KeyBinding[]{this.keyBindForward, this.keyBindLeft, this.keyBindBack, this.keyBindRight, this.keyBindJump, this.keyBindDrop, this.keyBindInventory, this.keyBindChat, this.keyBindToggleFog, this.keyBindSave, this.keyBindLoad};

    public GameSettings(Minecraft mc, File fileRoot) {
        this.mc = mc;
        this.enhancedMc = new EnhancedMinecraft(mc);
        this.optionsFile = new File(fileRoot, "options.txt");
        this.loadOptions();
    }

    public final String setKeyBindingString(int keyBindID) {
        return this.keyBindings[keyBindID].keyDescription + ": " + Keyboard.getKeyName(this.keyBindings[keyBindID].keyCode);
    }

    public final void setKeyBinding(int keyBindID, int keyCode) {
        this.keyBindings[keyBindID].keyCode = keyCode;
        this.saveOptions();
    }

    public final void setOptionValue(int optionID, int value) {
        switch (optionID) {
            case 0:
                this.music = !this.music;
                this.mc.sndManager.onSoundOptionsChanged();
                break;

            case 1:
                this.sound = !this.sound;
                this.mc.sndManager.onSoundOptionsChanged();
                break;

            case 2:
                this.invertMouse = !this.invertMouse;
                break;

            case 3:
                this.showFPS = !this.showFPS;
                break;

            case 4:
                this.renderDistance = this.renderDistance + value & 3;
                break;

            case 5:
                this.fancyGraphics = !this.fancyGraphics;
                break;

            case 6:
                this.anaglyph = !this.anaglyph;
                this.mc.renderEngine.refreshTextures();
                break;

            case 7:
                this.limitFramerate = !this.limitFramerate;
                break;

            case 8:
                this.difficulty = this.difficulty + value & 3;
                break;

            case 9: // New option ID for confirmation setting
                this.showExitConfirmation = !this.showExitConfirmation;
                break;

            case 10: // New option ID for fullscreen mode
                this.enhancedMc.toggleFullscr
